import streamlit as st

st.set_page_config(page_title="حاسبة البناء بالمشاركة", layout="centered")

st.title("🔨 حاسبة البناء بالمشاركة")
st.write("📊 هذا التطبيق يساعدك على حساب تكاليف المشروع وربحيته بسهولة.")

# إدخال البيانات من المستخدم
سعر_المتر = st.number_input("🔹 سعر المتر:", min_value=0.0, value=20000.0, step=500.0)
مساحة_الشقة = st.number_input("🔹 مساحة الشقة (متر مربع):", min_value=0.0, value=150.0, step=10.0)
عدد_الشقق_في_الدور = st.number_input("🔹 عدد الشقق في الدور:", min_value=1, value=4, step=1)
عدد_الادوار = st.number_input("🔹 عدد الأدوار:", min_value=1, value=6, step=1)
نسبة_المطور = st.number_input("🔹 نسبة المطور (%):", min_value=0, max_value=100, value=50, step=5)

# حساب البيانات
اجمالي_عدد_الشقق = عدد_الشقق_في_الدور * عدد_الادوار
سعر_الوحدة = سعر_المتر * مساحة_الشقة
اجمالي_الايرادات = اجمالي_عدد_الشقق * سعر_الوحدة

تكلفة_البناء = st.number_input("🔹 إجمالي تكلفة البناء (جنيه):", min_value=0.0, value=30816000.0, step=100000.0)

# حساب مصاريف الأمن والصيانة
st.markdown("### 🛠️ مصاريف الأمن والصيانة")
مرتب_الحارس = st.number_input("🔹 مرتب الحارس (شهريًا):", min_value=0.0, value=5000.0, step=500.0)
صيانة_دورية = st.number_input("🔹 الصيانة الدورية (شهريًا):", min_value=0.0, value=4000.0, step=500.0)
خدمات_مشتركة = st.number_input("🔹 مصاريف الخدمات المشتركة (شهريًا):", min_value=0.0, value=2000.0, step=500.0)
ادارة_العقار = st.number_input("🔹 إدارة العقار (شهريًا):", min_value=0.0, value=3000.0, step=500.0)

اجمالي_الامن_والصيانة_السنوي = (مرتب_الحارس + صيانة_دورية + خدمات_مشتركة + ادارة_العقار) * 12
التكلفة_لكل_شقة = اجمالي_الامن_والصيانة_السنوي / اجمالي_عدد_الشقق

# حساب الربح
صافي_الربح = اجمالي_الايرادات - تكلفة_البناء
حصة_المطور = صافي_الربح * (نسبة_المطور / 100)
حصة_المالك = صافي_الربح - حصة_المطور

# التمويل المسبق
مقدم_الحجز_نسبة = st.number_input("🔹 نسبة المقدم (%):", min_value=0, max_value=100, value=25, step=5)
مقدم_الحجز = سعر_الوحدة * (مقدم_الحجز_نسبة / 100)
باقي_المبلغ = سعر_الوحدة - مقدم_الحجز

# الفوائد
نسبة_الفائدة_سنويا = st.number_input("🔹 نسبة الفائدة السنوية (%):", min_value=0.0, max_value=30.0, value=10.0, step=0.5)
مدة_التنفيذ = st.number_input("🔹 مدة التنفيذ (شهور):", min_value=1, max_value=60, value=24, step=1)

الفائدة_السنوية = باقي_المبلغ * (نسبة_الفائدة_سنويا / 100)
اجمالي_الفائدة = الفائدة_السنوية * (مدة_التنفيذ / 12)
اجمالي_المستحق = باقي_المبلغ + اجمالي_الفائدة
القسط_الشهري = اجمالي_المستحق / مدة_التنفيذ

# عرض النتائج
st.markdown("## 📝 النتائج:")
st.write(f"🔸 إجمالي عدد الشقق: {اجمالي_عدد_الشقق} شقة")
st.write(f"🔸 سعر الوحدة: {سعر_الوحدة:,.0f} جنيه")
st.write(f"🔸 إجمالي الإيرادات: {اجمالي_الايرادات:,.0f} جنيه")
st.write(f"🔸 صافي الربح: {صافي_الربح:,.0f} جنيه")
st.write(f"🔸 حصة المطور: {حصة_المطور:,.0f} جنيه")
st.write(f"🔸 حصة المالك: {حصة_المالك:,.0f} جنيه")
st.write(f"🔸 إجمالي مصاريف الأمن والصيانة السنوية: {اجمالي_الامن_والصيانة_السنوي:,.0f} جنيه")
st.write(f"🔸 التكلفة السنوية لكل شقة: {التكلفة_لكل_شقة:,.0f} جنيه")
st.write(f"🔸 مقدم الحجز: {مقدم_الحجز:,.0f} جنيه")
st.write(f"🔸 إجمالي الفائدة: {اجمالي_الفائدة:,.0f} جنيه")
st.write(f"🔸 إجمالي المستحق بالتقسيط: {اجمالي_المستحق:,.0f} جنيه")
st.write(f"🔸 القسط الشهري: {القسط_الشهري:,.0f} جنيه")
